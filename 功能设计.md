# 功能设计概述

## 地图功能

打开网页后，先加载数据库里相应的数据，给地图上相应的点进行绘制标记点并设置显示窗口，绑定相应的点击事件：点击后向相应的url发送请求加载相应id的数据然后把数据交给图表

## 图表功能

初始化先设置样式，点击标记后的根据日期和ID获取相应数据并绘制，图表显示这段时间该站点自行车的租还量，默认是折线图。右上角的工具箱可以做其他的设置

## 路由设计

### 请求获取一个站点信息

1.  `GET` 118.89.186.225:8080/api/stationRent_Return`?`stationID=xxxx`&`startTime=yyyy-mm-dd`&`endTime=yyyy-mm-dd 
     返回是否存在该站点，存在返回1、站点ID、名字、经纬度和时间段内的租还自行车辆数(同一天则返回各个时间段的情况)，否则返回0

2.  `GET` 118.89.186.225:8080/api/stationInfo`?`stationID=xxxx 
     返回是否存在该站点，存在返回1、站点ID、名字、经纬度，否则返回0

3.  `GET` 118.89.186.225:8080/api/stationAll 
     返回全部站点ID、名字、经纬度

4.  `GET` 118.89.186.225:8080/api/stationLine`?`stationID=xxxx`&`startTime=yyyy-mm-dd`&`endTime=yyyy-mm-dd 
     返回是否存在该站点，存在返回1、站点ID、名字、经纬度、时间段内与该站点相关的所有路线和各路线上的自行车辆数，否则返回0

如下例子

返回某段时间某个站点的所有信息

```json
如下例子
输入 http://118.89.186.225:8080/api/stationRent_Return?stationID=1210&startTime=2014-03-23&endTime=2014-03-23
{
   "isRight":1,
   "stationId":1210,
   "stationName":"之江路九四五号",
   "longiTude":120.213257,
   "latiTude":30.237366,
   "rental":
   [
      {"rentalnum":"1","time":"06"},
      {"rentalnum":"1","time":"07"},
      {"rentalnum":"2","time":"08"},
      {"rentalnum":"4","time":"09"},
      {"rentalnum":"1","time":"10"},
      {"rentalnum":"4","time":"11"},
      {"rentalnum":"1","time":"12"},
      {"rentalnum":"2","time":"14"},
      {"rentalnum":"1","time":"15"},
      {"rentalnum":"1","time":"16"},
      {"rentalnum":"2","time":"18"},
      {"rentalnum":"1","time":"19"},
      {"rentalnum":"1","time":"20"}
   ],
   "return":
   [
      {"returnnum":"1","time":"07"},
      {"returnnum":"1","time":"08"},
      {"returnnum":"4","time":"09"},
      {"returnnum":"1","time":"10"},
      {"returnnum":"1","time":"12"},
      {"returnnum":"2","time":"13"},
      {"returnnum":"2","time":"14"},
      {"returnnum":"4","time":"15"},
      {"returnnum":"4","time":"16"},
      {"returnnum":"3","time":"19"},
      {"returnnum":"1","time":"20"}
   ]
}

输入 http://118.89.186.225:8080/api/stationRent_Return?stationID=121011&startTime=2014-03-23&endTime=2014-03-23
{
   "isRight":0
}

输入 http://118.89.186.225:8080/api/stationLine?stationID=1210&startTime=2014-03-23&endTime=2014-03-23
{
    "isRight":1,
    "stationID":1210,
    "stationName":"之江路九四五号",
    "longiTude":120.213257,
    "latiTude":30.237366,
    "line":
    [
        {"leaseStation":"1210","returnStation":"1076","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1080","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1095","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1126","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1187","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1210","bikeNum":3},
        {"leaseStation":"1210","returnStation":"1289","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1319","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1322","bikeNum":2},
        {"leaseStation":"1210","returnStation":"1367","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1397","bikeNum":1},
        {"leaseStation":"1210","returnStation":"1430","bikeNum":3},
        {"leaseStation":"1210","returnStation":"1432","bikeNum":1},
        {"leaseStation":"1210","returnStation":"3202","bikeNum":1},
        {"leaseStation":"1210","returnStation":"3219","bikeNum":1},
        {"leaseStation":"1210","returnStation":"6010","bikeNum":1},
        {"leaseStation":"1210","returnStation":"8008","bikeNum":1},
        {"leaseStation":"1042","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1208","returnStation":"1210","bikeNum":2},
        {"leaseStation":"1210","returnStation":"1210","bikeNum":3},
        {"leaseStation":"1213","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1274","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1288","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1289","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1308","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1319","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1351","returnStation":"1210","bikeNum":3},
        {"leaseStation":"1354","returnStation":"1210","bikeNum":2},
        {"leaseStation":"1428","returnStation":"1210","bikeNum":1},
        {"leaseStation":"1430","returnStation":"1210","bikeNum":4},
        {"leaseStation":"1432","returnStation":"1210","bikeNum":1},
        {"leaseStation":"3253","returnStation":"1210","bikeNum":1}
    ]
}
```
