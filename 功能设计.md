# 功能设计概述

## 地图功能

打开网页后，先加载数据库里相应的数据，给地图上相应的点进行绘制标记点并设置显示窗口，
绑定相应的点击事件：点击后向相应的url发送请求加载相应id的数据然后把数据交给图表

## 图表功能

初始化先设置样式，点击标记后的根据日期和ID获取相应数据并绘制，图表显示这段时间
该站点自行车的租还量，默认是折线图。右上角的工具箱可以做其他的设置

## 路由设计

### 请求获取一个站点信息

1. `GET` /api/stationInfo`?`stationID=xxxx`&`startTime=yyyy-mm-dd`&`endTime=yyyy-mm-dd 返回该站点名字、ID、经纬度和这段时间的借车量、租车量(同一天则返回各个时间段的情况)

2. `GET` /api/stationInfo`?`stationID=xxxx 返回站点名字、ID、经纬度

如下例子

返回某段时间某个站点的所有信息

```json
{
    "stationId": 1210,
    "stationName": "之江路九四五号",
    "longiTude": 120.213257,
    "latiTude": 30.237366,
    "rental": [{
        "rentalnum": "88",
        "date": "2014-03-23"
    }, {
        "rentalnum": "336",
        "date": "2014-03-24"
    }],
    "return": [{
        "returnnum": "96",
        "date": "2014-03-23"
    }, {
        "returnnum": "441",
        "date": "2014-03-24"
    }]
}
```

查询同一天则返回各个时间段的情况

```json
{
    "stationId": 1210,
    "stationName": "之江路九四五号",
    "longiTude": 120.213257,
    "latiTude": 30.237366,
    "rental": [{
        "rentalnum": "8",
        "time": "9"
    }, {
        "rentalnum": "6",
        "time": "10"
    }],
    "return": [{
        "returnnum": "6",
        "time": "17"
    }, {
        "returnnum": "1",
        "time": "18"
    }]
}
```

返回全部站点信息

```json
[{
    "stationId": "1200",
    "stationName": "秋涛支路清江路口",
    "longiTude": "120.202832",
    "latiTude": "30.248621"
}, {
    "stationId": "1201",
    "stationName": "近江食品市场二",
    "longiTude": "120.202691",
    "latiTude": "30.247982"
}, {
    "stationId": "1202",
    "stationName": "秋涛支路",
    "longiTude": "120.201313",
    "latiTude": "30.246672"
}, {
    "stationId": "1203",
    "stationName": "近江加油站",
    "longiTude": "120.200949",
    "latiTude": "30.245774"
}, {
    "stationId": "1204",
    "stationName": "秋涛支路南口",
    "longiTude": "120.200407",
    "latiTude": "30.24515"
}, {
    "stationId": "1205",
    "stationName": "石贯子巷",
    "longiTude": "120.175826",
    "latiTude": "30.261408"
}, {
    "stationId": "1206",
    "stationName": "延安路解放路口",
    "longiTude": "120.170548",
    "latiTude": "30.253535"
}, {
    "stationId": "1207",
    "stationName": "莫邪塘社区",
    "longiTude": "120.195792",
    "latiTude": "30.247404"
}, {
    "stationId": "1208",
    "stationName": "之江路望江东路口",
    "longiTude": "120.204579",
    "latiTude": "30.230439"
}, {
    "stationId": "1209",
    "stationName": "江韵园",
    "longiTude": "120.210189",
    "latiTude": "30.234839"
}, {
    "stationId": "1210",
    "stationName": "之江路九四五号",
    "longiTude": "120.213257",
    "latiTude": "30.237366"
}, {
    "stationId": "1211",
    "stationName": "南山路二一八-五号",
    "longiTude": "120.166751",
    "latiTude": "30.250314"
}, {
    "stationId": "1212",
    "stationName": "清江路二九二号",
    "longiTude": "120.208724",
    "latiTude": "30.243684"
}, {
    "stationId": "1213",
    "stationName": "清江路三四六号",
    "longiTude": "120.211868",
    "latiTude": "30.241399"
}, {
    "stationId": "1214",
    "stationName": "钱江时代公寓二",
    "longiTude": "120.212743",
    "latiTude": "30.240743"
}, {
    "stationId": "1215",
    "stationName": "新工社区",
    "longiTude": "120.183539",
    "latiTude": "30.227124"
}]
```
